<!DOCTYPE html>
<html>
<head>
<title>Date Girl Compatibility</title>
<style>
	body{
	  font-family: Arial;
	  background-image: url("date_bg.png");
	}
	.content {
	  width: 100%;
	}

	.left {
	  width: 50%;
	  float: left;
	}

	.right {
	  width: 50%;
	  float: left;
	  overflow: hidden;
	  overflow-y: scroll;
	}
	.AnswerBlock {
		display: none;
	}
	.destBlock {
		display: none;
	}
	.rightSpeaker {
		display: none;
	}
	textarea {
		resize: none;
	}	
</style>
</head>
<body>

<center><h1>Date Girl Compatibility Generator</h1></center>

<div class="left">
<!-- Text box you wanna recreate -->
<p><div id="duplicatePage0">
<!--PageNumber-->
<h3><span class="pageNo">Page 0</span></h3>	
		
<!--Dialogue Type-->
<label id="chat_type">What happens after?</label> 	
<select class="chatType" id="chatType" onchange="chatSelect(this)" sele>
	<option value="1">Select answers</option>
	<option value="2">Go to dialouge</option>
	<option value="3">End dialouge</option>
</select><br/><br/>

<!--Left Character-->
<b>Left character</b></br>
<!--Adopt Colors-->		
<label for="adoptLeft">Adopt Color Alt</label><input type="checkbox" class="adoptLeft" name="adoptLeft" checked><br/>
<!--Strip number-->
<label for="stripLeft">Portrait Sprite Index:</label><input type="number" class="stripLeft" name="stripLeft" min="0" step="1" value="0" size="3"><br/>
<!--Uses Custom-->		
<label for="customLeft">Uses Custom Sprite?</label><input type="checkbox" class="customLeft" name="customLeft" checked><br/><br/>


<!--Right Character-->
<b>Right character</b></br>
<!--Adopt Colors-->		
<label for="adoptRight">Adopt Color Alt</label><input type="checkbox" class="adoptRight" name="adoptRight" checked><br/>
<!--Strip number-->
<label for="stripRight">Portrait Sprite Index:</label><input type="number" class="stripRight" name="stripRight" min="0" step="1" value="0" size="3"><br/>
<!--Uses Custom-->		
<label for="customRight">Uses Custom Sprite?</label><input type="checkbox" class="customRight" name="customRight" checked><br/>
<!--Do they speak?-->
<label for="talkRight">Is there a right speaker?</label><input type="checkbox" class="talkRight" name="talkRight" onclick="rightSpeak(this)"><br/>

<!--Insert Dialouge and Options-->
<br/>
<b>Insert dialogue here:</b><br/>
<input type="text" class="pgDiag1" name="pgDiag1" size="60" maxlength="60"><br/>
<input type="text" class="pgDiag2" name="pgDiag2" size="60" maxlength="60"><br/>
<input type="text" class="pgDiag3" name="pgDiag3" size="60" maxlength="60"><br/>
<br/>

<span class="rightSpeaker">
<b>Right speaker dialogue:</b><br/>
<input type="text" class="rDiag1" name="rDiag1" size="60" maxlength="60"><br/>
<input type="text" class="rDiag2" name="rDiag2" size="60" maxlength="60"><br/>
<input type="text" class="rDiag3" name="rDiag3" size="60" maxlength="60"><br/>
<br/>
</span>

<span class="AnswerBlock">
<b>Insert options here and what page they go to:</b><br/>
<input type="text" class="pgOpt1" name="pgOpt1" size="60" maxlength="60"><input type="number" class="ansOpt1" min="0" step="1" value="0" size="3"><br/>
<input type="text" class="pgOpt2" name="pgOpt2" size="60" maxlength="60"><input type="number" class="ansOpt2" min="0" step="1" value="0" size="3"><br/>
<input type="text" class="pgOpt3" name="pgOpt3" size="60" maxlength="60"><input type="number" class="ansOpt3" min="0" step="1" value="0" size="3"><br/>
<br/>
</span>

<!--What page to go to-->
<span class="destBlock"><label for="pgDest">Go to page:</label><input type="number" class="pgDest" name="pgDest" min="0" step="1" value="0" size="3"></span><br/>
</div>
</p>

</div>

<div class="right">
<button type="button" id="duplicate" onclick="duplicate()">Create new page</button> 
<button type="button" id="generate" onclick="generate()">Generate Code</button> 
<h2>Copy and paste this into init.gml!</h2>
<textarea id="dataBox" name="dataBox" rows="40" cols="100">
</textarea>

<br/><br/>
<b> Changelog </b><br/>
03/08/21: Made unnecessary options disappear (still a bit buggy) and right speaker dialogue added!<br/>
03/07/21: It has existed.<br/>
</div>

<script language="javascript" type="text/javascript">
var i = 0;

//Make sure it pops up
function chatSelect(sel) {
    if(sel.value == '1')
	{
		sel.parentElement.getElementsByClassName("AnswerBlock")[0].style.display = "block";
		sel.parentElement.getElementsByClassName("destBlock")[0].style.display = "none";
	}
    else if(sel.value == '2')
	{
		sel.parentElement.getElementsByClassName("AnswerBlock")[0].style.display = "none";
		sel.parentElement.getElementsByClassName("destBlock")[0].style.display = "block";
	}
    else
	{
		sel.parentElement.getElementsByClassName("AnswerBlock")[0].style.display = "none";
		sel.parentElement.getElementsByClassName("destBlock")[0].style.display = "none";
	}
}
function rightSpeak(sel) {
	var vals = sel.parentElement.getElementsByClassName("talkRight")[0].checked;
    if(vals)
		sel.parentElement.getElementsByClassName("rightSpeaker")[0].style.display = "block";
    else
		sel.parentElement.getElementsByClassName("rightSpeaker")[0].style.display = "none";
}

function duplicate() {
    var original = document.getElementById('duplicatePage' + i);
    var clone = original.cloneNode(true); // "deep" clone
	clone.id = "duplicatePage" + ++i; // there can only be one element with an ID
    original.parentNode.appendChild(clone);
	document.getElementsByClassName('pageNo')[i].innerHTML = "Page " + i;
}

//If anyone sees this script, please forgive me.
function generate(){

var codeText = 
`//Date Girl Support. Generated using McDucky's Date Girl Generator! 
Chatting = true;
DG_portrait = sprite_get("DG_portrait");
var DG_page = 0;
`;

//Check every page generated so far!
for (var pg = -1; pg < i; pg ++) 
{
//Get current page.
var curPage = document.getElementById("duplicatePage" + (pg+1));

var chatType = curPage.getElementsByClassName("chatType")[0].value;
var adptL = "false";
var adptR = "false";
var custL = "false";
var custR = "false";
var rSpeaking = "false";
var diag1 = curPage.getElementsByClassName("pgDiag1")[0].value;
var diag2 = curPage.getElementsByClassName("pgDiag2")[0].value;
var diag3 = curPage.getElementsByClassName("pgDiag3")[0].value;
var opt1 = curPage.getElementsByClassName("pgOpt1")[0].value;
var opt2 = curPage.getElementsByClassName("pgOpt2")[0].value;
var opt3 = curPage.getElementsByClassName("pgOpt3")[0].value;
var nxtPg = curPage.getElementsByClassName("pgDest")[0].value;
var rspeak1 = curPage.getElementsByClassName("rDiag1")[0].value;
var rspeak2 = curPage.getElementsByClassName("rDiag2")[0].value;
var rspeak3 = curPage.getElementsByClassName("rDiag3")[0].value;
var ans1 = curPage.getElementsByClassName("ansOpt1")[0].value;
var ans2 = curPage.getElementsByClassName("ansOpt2")[0].value;
var ans3 = curPage.getElementsByClassName("ansOpt3")[0].value;

if(curPage.getElementsByClassName("adoptLeft")[0].checked)
	adptL = "true";
if(curPage.getElementsByClassName("adoptRight")[0].checked)
	adptR = "true";
if(curPage.getElementsByClassName("customLeft")[0].checked)
	custL = "true";
if(curPage.getElementsByClassName("customRight")[0].checked)
	custR = "true";
if(curPage.getElementsByClassName("talkRight")[0].checked)
	rSpeaking = "true";
	
var stripL = curPage.getElementsByClassName("stripLeft")[0].value;
var stripR = curPage.getElementsByClassName("stripRight")[0].value;

codeText += `
//Page ` + (pg+1) + `
DG_page = ` + (pg+1) + `;
DG_chat_type[DG_page] = ` + chatType + `;

DG_adopts_color_left[DG_page] = ` + adptL + `;
DG_adopts_color_right[DG_page] = ` + adptR + `;

DG_left_strip[DG_page] = ` + stripL + `;
DG_right_strip[DG_page] = ` + stripR + `;

DG_custom_left_portrait[DG_page] = ` + custL + `;
DG_custom_right_portrait[DG_page] = ` + custR + `;

DG_right_speaker[DG_page] = ` + rSpeaking + `;

DG_dialogue[DG_page] = 
"` + diag1 + `
` + diag2 + `
` + diag3 + `"
`;
if(rSpeaking == "true"){
codeText += `
DG_dialogue_right[DG_page] = 
"` + rspeak1 + `
` + rspeak2 + `
` + rspeak3 + `"`
;
}
if(chatType == 1){
codeText += `
DG_options[DG_page] = 
"` + opt1 + `
` + opt2 + `
` + opt3 + `"
			
DG_answers[DG_page] = [` + ans1 + `,` + ans2 + `,` + ans3 + `];

`;

}else if(chatType == 2){
codeText += `
DG_nextindex[DG_page] = ` + nxtPg + `;
`;
}

}

//Put out the text for the user to paste ^w^
document.getElementById("dataBox").value = codeText;

}
</script>

</html>